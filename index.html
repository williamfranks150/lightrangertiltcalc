<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<meta name="theme-color" content="#000000">
<title>LR Tilt</title>

<style>
  :root { color-scheme: dark; }
  body{
    margin:0; background:#000; color:#fff;
    font-family:-apple-system, system-ui, sans-serif;
  }
  .wrap{
    padding:16px;
    max-width:520px;
    margin:0 auto;
  }
  h1{
    margin:0 0 12px 0;
    font-size:18px;
    text-align:center;
    letter-spacing:0.08em;
  }
  .card{
    border:1px solid #2a2a2a;
    border-radius:12px;
    padding:14px;
    background:#070707;
  }
  .grid{
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap:10px;
  }
  label{
    display:block;
    font-size:12px;
    opacity:0.75;
    margin:0 0 6px 0;
  }
  input{
    width:100%;
    padding:12px 10px;
    font-size:18px;
    border-radius:10px;
    border:1px solid #333;
    background:#000;
    color:#fff;
    box-sizing:border-box;
    outline:none;
  }
  .row{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:10px;
    margin-top:12px;
  }
  button{
    flex:1;
    padding:12px 10px;
    font-size:16px;
    border-radius:10px;
    border:1px solid #444;
    background:#111;
    color:#fff;
  }
  .resultCard{
    margin-top:12px;
    border:1px solid #2a2a2a;
    border-radius:12px;
    padding:14px;
    background:#050505;
  }
  .big{
    font-size:34px;
    font-weight:700;
    line-height:1.1;
  }
  .sub{
    font-size:13px;
    opacity:0.7;
    margin-top:6px;
  }
  .tiny{
    font-size:12px;
    opacity:0.55;
    margin-top:14px;
    text-align:center;
  }
  .full{ grid-column: 1 / -1; }
</style>
</head>

<body>
<div class="wrap">
  <h1>LIGHT RANGER • TILT</h1>

  <div class="card">
    <div class="grid">
      <div>
        <label for="camH">CAMERA HEIGHT (m)</label>
        <input id="camH" inputmode="decimal" placeholder="e.g. 1.60">
      </div>
      <div>
        <label for="subH">TARGET HEIGHT (m)</label>
        <input id="subH" inputmode="decimal" placeholder="e.g. 1.45">
      </div>

      <div class="full">
        <label for="dist">HORIZONTAL DISTANCE TO TARGET (m)</label>
        <input id="dist" inputmode="decimal" placeholder="e.g. 4.20">
      </div>
    </div>

    <div class="row">
      <button id="calc">CALCULATE</button>
      <button id="reset">RESET</button>
    </div>
  </div>

  <div class="resultCard">
    <div class="big" id="tiltDeg">—</div>
    <div class="sub" id="tiltNote">Enter values.</div>
  </div>

  <div class="tiny">
    Tilt sign: + = tilt up, − = tilt down
  </div>
</div>

<script>
/*
Tilt angle = atan( (targetHeight - cameraHeight) / distance )
Outputs degrees, signed.
*/
const $ = (id) => document.getElementById(id);

function num(v){
  if (v == null) return NaN;
  const x = parseFloat(String(v).replace(",", "."));
  return Number.isFinite(x) ? x : NaN;
}

function clampDigits(x){
  if (!Number.isFinite(x)) return "—";
  const abs = Math.abs(x);
  const d = abs >= 10 ? 1 : 2;
  return x.toFixed(d) + "°";
}

function calc(){
  const camH = num($("camH").value);
  const subH = num($("subH").value);
  const dist = num($("dist").value);

  if (!Number.isFinite(camH) || !Number.isFinite(subH) || !Number.isFinite(dist) || dist <= 0){
    $("tiltDeg").textContent = "—";
    $("tiltNote").textContent = "Need valid heights and distance > 0.";
    return;
  }

  const rise = subH - camH;
  const rad = Math.atan(rise / dist);
  const deg = rad * 180 / Math.PI;

  $("tiltDeg").textContent = clampDigits(deg);

  const dir = deg > 0 ? "TILT UP" : (deg < 0 ? "TILT DOWN" : "LEVEL");
  $("tiltNote").textContent = `${dir} • ΔH ${rise.toFixed(2)} m • D ${dist.toFixed(2)} m`;
}

function resetAll(){
  $("camH").value = "";
  $("subH").value = "";
  $("dist").value = "";
  $("tiltDeg").textContent = "—";
  $("tiltNote").textContent = "Enter values.";
}

$("calc").addEventListener("click", calc);
$("reset").addEventListener("click", resetAll);

// Live-update as you type
["camH","subH","dist"].forEach(id => $(id).addEventListener("input", calc));

// Offline support
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("./sw.js");
}
</script>
</body>
</html>
